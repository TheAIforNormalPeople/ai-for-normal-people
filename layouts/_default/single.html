{{ define "main" }}
<article class="post-single">
    <div class="container-narrow">
        <header class="post-header">
            <h1 class="post-title">{{ .Title }}</h1>
            <div class="post-meta">
                <time datetime="{{ .Date.Format "2006-01-02" }}">
                    {{ .Date.Format (.Site.Params.dateFormat | default "January 2, 2006") }}
                </time>
                {{ if .Params.author }}
                <span class="separator">•</span>
                <span class="author">{{ .Params.author }}</span>
                {{ end }}
                <span class="separator">•</span>
                <span class="read-indicator" id="read-indicator" style="display: none; color: #22c55e; font-weight: 600;">✓ Read</span>
                {{ with .ReadingTime }}
                <span class="separator">•</span>
                <span class="reading-time">{{ . }} min read</span>
                {{ end }}
            </div>
            {{ if .Params.description }}
            <p class="post-description">{{ .Params.description }}</p>
            {{ end }}
        </header>
        
        <div class="post-content">
            {{ .Content }}
        </div>
        
        {{ if .Params.tags }}
        <footer class="post-footer">
            <div class="tags">
                {{ range .Params.tags }}
                <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}" class="tag">{{ . }}</a>
                {{ end }}
            </div>
        </footer>
        {{ end }}
    </div>
</article>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Mark this post as read when the page loads
    const currentSlug = '{{ .Slug }}';
    if (currentSlug) {
        localStorage.setItem('read_' + currentSlug, 'true');
        localStorage.setItem('read_' + currentSlug + '_timestamp', Date.now().toString());
        
        // Show the read indicator
        const readIndicator = document.getElementById('read-indicator');
        if (readIndicator) {
            setTimeout(() => {
                readIndicator.style.display = 'inline';
                readIndicator.style.opacity = '0';
                readIndicator.style.transition = 'opacity 0.5s ease-in';
                setTimeout(() => {
                    readIndicator.style.opacity = '1';
                }, 100);
            }, 1000); // Show after 1 second delay
        }
    }
});
</script>
{{ end }}






