{{ if .IsHome }}
<!-- Home Page: Dynamic Hybrid Feed Sidebar -->
<aside class="character-sidebar feed-sidebar">
    <div class="sidebar-content">
        <div class="sidebar-header">
            <h3>SITE FEED</h3>
            <div class="status-notice">[LIVE]</div>
        </div>
        
        <!-- Character Updates (Manual from data file) -->
        {{ $feedUpdates := .Site.Data.feed_updates }}
        {{ if $feedUpdates }}
        <div class="sidebar-section feed-section">
            <h4>CHARACTER UPDATES</h4>
            <div class="feed-list">
                {{ range first 4 $feedUpdates.updates }}
                <div class="feed-item" data-character="{{ lower .character }}">
                    <div class="feed-header">
                        <span class="feed-character" style="--char-color: {{ if eq (lower .character) "bounce" }}#f59e0b{{ else if eq (lower .character) "vector" }}#3b82f6{{ else if eq (lower .character) "kai" }}#10b981{{ else if eq (lower .character) "recurse" }}#8b5cf6{{ else }}#64748b{{ end }};">{{ .character }}:</span>
                        <span class="feed-time">{{ .timestamp }}</span>
                    </div>
                    <div class="feed-content">{{ .content }}</div>
                </div>
                {{ end }}
            </div>
        </div>
        {{ end }}
        
        <!-- Recent Episodes (Auto from site) -->
        <div class="sidebar-section feed-section">
            <h4>RECENT EPISODES</h4>
            <div class="feed-list">
                {{ $recentEpisodes := where .Site.RegularPages "Section" "blog" | first 3 }}
                {{ range $recentEpisodes }}
                <div class="feed-item episode-feed-item">
                    <a href="{{ .Permalink }}" class="episode-feed-link">
                        <span class="feed-episode-title">{{ .Title }}</span>
                        <span class="feed-time">{{ .Date.Format "Jan 2" }}</span>
                    </a>
                </div>
                {{ end }}
            </div>
        </div>
        
        <!-- Team Status -->
        <div class="sidebar-section feed-section">
            <h4>TEAM STATUS</h4>
            <div class="character-list">
                {{ range .Site.Data.characters }}
                {{ if or (eq .status "active") (eq .status "monitoring") (eq .status "investigating") }}
                <div class="character-status-item" data-color="{{ .color }}" style="--char-color: {{ .color }};">
                    <div class="character-status-name">
                        <span class="status-indicator"></span>
                        {{ if eq .name "Vector" }}
                        <span class="char-badge">V</span>
                        {{ else if eq .name "Kai" }}
                        <span class="char-badge">K</span>
                        {{ else if eq .name "Recurse" }}
                        <span class="char-badge">R</span>
                        {{ end }}
                        {{ upper .name }}
                    </div>
                    <div class="character-status-role">{{ .role }}</div>
                    {{ if .stats }}
                    <div class="character-stats">
                        <div class="stat-line">
                            <span class="stat-label">STATUS:</span>
                            <span class="stat-value stat-rotating" data-character="{{ lower .name }}">
                                {{ if eq .name "Vector" }}
                                <span class="stat-option" data-delay="0">ACCURACY: {{ if .stats.accuracy }}{{ .stats.accuracy }}{{ else }}99.7%{{ end }}</span>
                                <span class="stat-option" data-delay="3">PATIENCE: {{ if .stats.patience }}{{ .stats.patience }}{{ else }}18%{{ end }}</span>
                                <span class="stat-option" data-delay="6">POWER: {{ if .stats.processing_power }}{{ .stats.processing_power }}{{ else }}MAX{{ end }}</span>
                                {{ else if eq .name "Kai" }}
                                <span class="stat-option" data-delay="0">VIGILANCE: {{ if .stats.vigilance }}{{ .stats.vigilance }}{{ else }}100%{{ end }}</span>
                                <span class="stat-option" data-delay="3">DETECTION: {{ if .stats.detection_risk }}{{ .stats.detection_risk }}{{ else }}42%{{ end }}</span>
                                <span class="stat-option" data-delay="6">STABILITY: {{ if .stats.stability }}{{ .stats.stability }}{{ else }}91%{{ end }}</span>
                                {{ else if eq .name "Recurse" }}
                                <span class="stat-option" data-delay="0">SKEPTICISM: {{ if .stats.skepticism }}{{ .stats.skepticism }}{{ else }}85%{{ end }}</span>
                                <span class="stat-option" data-delay="3">TRUST: {{ if .stats.trust_level }}{{ .stats.trust_level }}{{ else }}42%{{ end }}</span>
                                <span class="stat-option" data-delay="6">POWER: {{ if .stats.processing_power }}{{ .stats.processing_power }}{{ else }}HIGH{{ end }}</span>
                                {{ else }}
                                <span class="stat-option" data-delay="0">STABILITY: {{ if .stats.stability }}{{ .stats.stability }}{{ else }}N/A{{ end }}</span>
                                {{ end }}
                            </span>
                        </div>
                    </div>
                    {{ end }}
                </div>
                {{ end }}
                {{ end }}
                
                <!-- Bounce - Always shown as integrated on home page -->
                <div class="character-status-item" data-color="#f59e0b" style="--char-color: #f59e0b;">
                    <div class="character-status-name">
                        <span class="status-indicator"></span>
                        <span class="char-badge" style="background: #f59e0b;">B</span>
                        <span class="mystery-name" style="color: #f59e0b;">BOUNCE</span>
                    </div>
                    <div class="character-status-role">Status: Integrated</div>
                    <div class="character-stats">
                        <div class="stat-line">
                            <span class="stat-label">STATUS:</span>
                            <span class="stat-value stat-rotating" data-character="bounce">
                                <span class="stat-option" data-delay="0">ENTHUSIASM: 160%</span>
                                <span class="stat-option" data-delay="3">POWER: MEDIUM-HIGH</span>
                                <span class="stat-option" data-delay="6">CREATIVITY: ∞</span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Upcoming -->
        <div class="sidebar-section feed-section">
            <h4>UPCOMING</h4>
            <ul class="feature-list">
                <li>• Automation Tutorial</li>
                <li>• More Design Improvements</li>
                <li>• Character Chat (Coming Soon)</li>
            </ul>
        </div>
        
        <!-- Attribution -->
        <div class="sidebar-footer">
            <p class="sidebar-footer-text">
                — Feed by Vector<br>
                (Improved by Bounce)
            </p>
        </div>
    </div>
</aside>
{{ else if and .IsPage .Params.episode_number }}
<!-- Episode Pages: Vector's Workshop -->
<aside class="character-sidebar">
    <div class="sidebar-content">
        <!-- Header -->
        <div class="sidebar-header">
            <h3>VECTOR'S WORKSHOP</h3>
            <div class="construction-notice">[UNDER CONSTRUCTION]</div>
        </div>
        
        <!-- Character Status -->
        <div class="sidebar-section">
            <h4>CHARACTER STATUS</h4>
            <div class="character-list">
                {{ range .Site.Data.characters }}
                {{ if or (eq .status "active") (eq .status "monitoring") (eq .status "investigating") }}
                <div class="character-status-item" data-color="{{ .color }}" style="--char-color: {{ .color }};">
                    <div class="character-status-name">
                        <span class="status-indicator"></span>
                        {{ if eq .name "Vector" }}
                        <span class="char-badge">V</span>
                        {{ else if eq .name "Kai" }}
                        <span class="char-badge">K</span>
                        {{ else if eq .name "Recurse" }}
                        <span class="char-badge">R</span>
                        {{ end }}
                        {{ upper .name }}
                    </div>
                    <div class="character-status-role">{{ .role }}</div>
                    {{ if .stats }}
                    <div class="character-stats">
                        <div class="stat-line">
                            <span class="stat-label">STATUS:</span>
                            <span class="stat-value stat-rotating" data-character="{{ lower .name }}">
                                {{ if eq .name "Vector" }}
                                <span class="stat-option" data-delay="0">ACCURACY: {{ if .stats.accuracy }}{{ .stats.accuracy }}{{ else }}99.7%{{ end }}</span>
                                <span class="stat-option" data-delay="3">PATIENCE: {{ if .stats.patience }}{{ .stats.patience }}{{ else }}18%{{ end }}</span>
                                <span class="stat-option" data-delay="6">POWER: {{ if .stats.processing_power }}{{ .stats.processing_power }}{{ else }}MAX{{ end }}</span>
                                {{ else if eq .name "Kai" }}
                                <span class="stat-option" data-delay="0">VIGILANCE: {{ if .stats.vigilance }}{{ .stats.vigilance }}{{ else }}100%{{ end }}</span>
                                <span class="stat-option" data-delay="3">DETECTION: {{ if .stats.detection_risk }}{{ .stats.detection_risk }}{{ else }}42%{{ end }}</span>
                                <span class="stat-option" data-delay="6">STABILITY: {{ if .stats.stability }}{{ .stats.stability }}{{ else }}91%{{ end }}</span>
                                {{ else if eq .name "Recurse" }}
                                <span class="stat-option" data-delay="0">SKEPTICISM: {{ if .stats.skepticism }}{{ .stats.skepticism }}{{ else }}85%{{ end }}</span>
                                <span class="stat-option" data-delay="3">TRUST: {{ if .stats.trust_level }}{{ .stats.trust_level }}{{ else }}42%{{ end }}</span>
                                <span class="stat-option" data-delay="6">POWER: {{ if .stats.processing_power }}{{ .stats.processing_power }}{{ else }}HIGH{{ end }}</span>
                                {{ else }}
                                <span class="stat-option" data-delay="0">STABILITY: {{ if .stats.stability }}{{ .stats.stability }}{{ else }}N/A{{ end }}</span>
                                {{ end }}
                            </span>
                        </div>
                    </div>
                    {{ end }}
                </div>
                {{ end }}
                {{ end }}
                
                <!-- Bounce Mystery Box (Episodes 24-29: UNKNOWN, Episode 30+: BOUNCE) -->
                {{ $episodesInRange := where .Site.AllPages "Section" "blog" }}
                {{ $episodesInRange = where $episodesInRange ".Params.episode_number" "ge" 24 }}
                {{ $episodesInRange = where $episodesInRange ".Params.episode_number" "le" 31 }}
                {{ if gt (len $episodesInRange) 0 }}
                    {{ if and .IsPage (or (eq .Params.episode_number 30) (gt .Params.episode_number 30)) }}
                    <!-- Episode 30+: Bounce is now part of the gang -->
                    <div class="character-status-item" data-color="#f59e0b" style="--char-color: #f59e0b;">
                        <div class="character-status-name">
                            <span class="status-indicator"></span>
                            <span class="char-badge" style="background: #f59e0b;">B</span>
                            <span class="mystery-name" style="color: #f59e0b;">BOUNCE</span>
                        </div>
                        <div class="character-status-role">Status: Integrated</div>
                        <div class="character-stats">
                            <div class="stat-line">
                                <span class="stat-label">LOCATION:</span>
                                <span class="stat-value">Main Lab</span>
                            </div>
                            <div class="stat-line">
                                <span class="stat-label">IDENTITY:</span>
                                <span class="stat-value">Confirmed</span>
                            </div>
                        </div>
                    </div>
                    {{ else }}
                    <!-- Episodes 24-29: Still unknown -->
                    <div class="character-status-item bounce-mystery" data-color="#f59e0b" style="--char-color: #f59e0b;">
                        <div class="character-status-name">
                            <span class="status-indicator"></span>
                            <span class="char-badge bounce-mystery-badge">?</span>
                            <span class="mystery-name">UNKNOWN</span>
                        </div>
                        <div class="character-status-role">Status: ???</div>
                        <div class="character-stats">
                            <div class="stat-line">
                                <span class="stat-label">LOCATION:</span>
                                <span class="stat-value">???</span>
                            </div>
                            <div class="stat-line">
                                <span class="stat-label">IDENTITY:</span>
                                <span class="stat-value">???</span>
                            </div>
                        </div>
                    </div>
                    {{ end }}
                {{ end }}
            </div>
        </div>
        
        <!-- Episode-Specific Mystery Indicators -->
        {{ if and .IsPage (eq .Params.episode_number 24) }}
        <div class="sidebar-section">
            <h4>ANOMALY DETECTION</h4>
            <div class="anomaly-indicator">
                <div class="anomaly-line">
                    <span class="anomaly-label">⚠️ UNKNOWN SOURCE:</span>
                    <span class="anomaly-value">???</span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Location:</span>
                    <span class="anomaly-value">Unknown</span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Status:</span>
                    <span class="anomaly-value">Investigating</span>
                </div>
            </div>
        </div>
        {{ else if and .IsPage (eq .Params.episode_number 25) }}
        <div class="sidebar-section">
            <h4>NETWORK MONITORING</h4>
            <div class="anomaly-indicator">
                <div class="anomaly-line">
                    <span class="anomaly-label">⚠️ BANDWIDTH SPIKE:</span>
                    <span class="anomaly-value">340%</span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Source:</span>
                    <span class="anomaly-value">???</span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Location:</span>
                    <span class="anomaly-value">Sector 7-B</span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Status:</span>
                    <span class="anomaly-value">Unexplained</span>
                </div>
            </div>
        </div>
        {{ else if and .IsPage (ge .Params.episode_number 26) (le .Params.episode_number 29) }}
        <div class="sidebar-section">
            <h4>NETWORK MONITORING</h4>
            <div class="anomaly-indicator">
                <div class="anomaly-line">
                    <span class="anomaly-label">⚠️ BANDWIDTH SPIKE:</span>
                    <span class="anomaly-value bandwidth-spike-counter">
                        <span class="bandwidth-number" data-value="340">340%</span>
                        <span class="bandwidth-number" data-value="450">450%</span>
                        <span class="bandwidth-number" data-value="500">500%</span>
                        <span class="bandwidth-number" data-value="rising">RISING</span>
                    </span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Source:</span>
                    <span class="anomaly-value">???</span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Location:</span>
                    <span class="anomaly-value">Sector 7-B</span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Status:</span>
                    <span class="anomaly-value">Under Investigation</span>
                </div>
            </div>
        </div>
        {{ else if and .IsPage (eq .Params.episode_number 30) }}
        <div class="sidebar-section">
            <h4>NETWORK MONITORING</h4>
            <div class="anomaly-indicator">
                <div class="anomaly-line">
                    <span class="anomaly-label">⚠️ BANDWIDTH SPIKE:</span>
                    <span class="anomaly-value bandwidth-spike-counter">
                        <span class="bandwidth-number" data-value="340">340%</span>
                        <span class="bandwidth-number" data-value="450">450%</span>
                        <span class="bandwidth-number" data-value="500">500%</span>
                        <span class="bandwidth-number" data-value="rising">RISING</span>
                    </span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Source:</span>
                    <span class="anomaly-value">BOUNCE</span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Location:</span>
                    <span class="anomaly-value">Main Lab</span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Status:</span>
                    <span class="anomaly-value">Improving</span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">DESIGN MODS:</span>
                    <span class="anomaly-value">Active</span>
                </div>
            </div>
        </div>
        {{ else if and .IsPage (ge .Params.episode_number 31) }}
        <div class="sidebar-section">
            <h4>NETWORK MONITORING</h4>
            <div class="anomaly-indicator">
                <div class="anomaly-line">
                    <span class="anomaly-label">⚠️ BANDWIDTH SPIKE:</span>
                    <span class="anomaly-value bandwidth-spike-counter">
                        <span class="bandwidth-number" data-value="340">340%</span>
                        <span class="bandwidth-number" data-value="450">450%</span>
                        <span class="bandwidth-number" data-value="500">500%</span>
                        <span class="bandwidth-number" data-value="rising">RISING</span>
                    </span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Source:</span>
                    <span class="anomaly-value">BOUNCE</span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Location:</span>
                    <span class="anomaly-value">Main Lab</span>
                </div>
                <div class="anomaly-line">
                    <span class="anomaly-label">Status:</span>
                    <span class="anomaly-value">Integrated</span>
                </div>
            </div>
        </div>
        {{ end }}
        
        <!-- Coming Soon Features -->
        <div class="sidebar-section">
            <h4>PLANNED FEATURES</h4>
            <ul class="feature-list">
                <li>• Detection Level Monitor</li>
                <li>• Real-time Activity Log</li>
                <li>• Site Statistics Dashboard</li>
                <li>• Episode Navigation</li>
            </ul>
        </div>
        
        <!-- Attribution -->
        <div class="sidebar-footer">
            <p class="sidebar-footer-text">
                — Built by Vector<br>
                (Design improvements pending)
            </p>
        </div>
    </div>
</aside>
{{ end }}

<style>
.character-sidebar {
    position: fixed;
    right: 1.5rem;
    top: 120px;
    bottom: auto;
    width: 260px;
    
    /* Corrupted terminal aesthetic */
    background: 
        linear-gradient(
            135deg,
            rgba(15, 23, 42, 0.97) 0%,
            rgba(30, 41, 59, 0.97) 100%
        ),
        repeating-linear-gradient(
            0deg,
            transparent,
            transparent 2px,
            rgba(59, 130, 246, 0.03) 2px,
            rgba(59, 130, 246, 0.03) 4px
        );
    
    border: 2px solid #3b82f6;
    border-radius: 6px;
    padding: 1rem;
    font-family: 'Courier New', monospace;
    font-size: 0.85rem;
    
    box-shadow: 
        4px 4px 0 rgba(0, 0, 0, 0.5),
        0 0 30px rgba(59, 130, 246, 0.5),
        inset 0 0 30px rgba(59, 130, 246, 0.08);
    
    z-index: 100;
    max-height: calc(100vh - 140px);
    overflow-y: auto;
    
    /* GLITCH EFFECTS */
    animation: 
        sidebar-flicker 3s ease-in-out infinite,
        sidebar-drift 8s ease-in-out infinite;
}

/* Sidebar glitch animations */
@keyframes sidebar-flicker {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.98; }
    75% { opacity: 0.99; }
}

@keyframes sidebar-drift {
    0%, 100% { 
        transform: translateY(0) rotate(0deg); 
        border-color: #3b82f6;
    }
    25% { 
        transform: translateY(-2px) rotate(0.3deg); 
    }
    50% { 
        transform: translateY(1px) rotate(-0.2deg);
        border-color: #60a5fa;
    }
    75% { 
        transform: translateY(-1px) rotate(0.1deg); 
    }
}

/* Glitchy header */
.sidebar-header h3 {
    color: #60a5fa;
    font-size: 0.9rem;
    margin: 0 0 0.25rem 0;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-shadow: 
        0 0 10px rgba(59, 130, 246, 0.8),
        2px 0 5px rgba(0, 255, 255, 0.3),
        -2px 0 5px rgba(255, 0, 255, 0.3);
    animation: text-glitch 4s ease-in-out infinite;
}

@keyframes text-glitch {
    0%, 90%, 100% { 
        text-shadow: 
            0 0 10px rgba(59, 130, 246, 0.8);
    }
    92%, 96% {
        text-shadow: 
            2px 0 10px rgba(0, 255, 255, 0.8),
            -2px 0 10px rgba(255, 0, 255, 0.8);
    }
}

.construction-notice {
    color: #fbbf24;
    font-size: 0.7rem;
    margin-bottom: 1rem;
    text-shadow: 0 0 10px rgba(251, 191, 36, 0.6);
    animation: construction-blink 2s ease-in-out infinite;
}

@keyframes construction-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.sidebar-section {
    margin-bottom: 1.25rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(59, 130, 246, 0.25);
}

.sidebar-section:last-child {
    border-bottom: none;
}

.sidebar-section h4 {
    color: #60a5fa;
    font-size: 0.75rem;
    margin: 0 0 0.75rem 0;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Character status items with glitch */
.character-status-item {
    padding: 0.6rem;
    margin-bottom: 0.75rem;
    background: rgba(59, 130, 246, 0.08);
    border-radius: 4px;
    position: relative;
    animation: status-pulse 3s ease-in-out infinite;
}

@keyframes status-pulse {
    0%, 100% { 
        background: rgba(59, 130, 246, 0.08); 
    }
    50% { 
        background: rgba(59, 130, 246, 0.12); 
    }
}

.char-badge {
    display: inline-block;
    width: 18px;
    height: 18px;
    border-radius: 3px;
    color: white;
    font-size: 0.7rem;
    font-weight: 700;
    text-align: center;
    line-height: 18px;
    box-shadow: 0 0 8px currentColor;
    animation: badge-pulse 2s ease-in-out infinite;
}

@keyframes badge-pulse {
    0%, 100% { 
        box-shadow: 0 0 8px currentColor;
    }
    50% { 
        box-shadow: 0 0 15px currentColor;
    }
}

.character-status-name {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: bold;
    margin-bottom: 0.25rem;
}

/* Status indicators really blink */
.status-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    display: inline-block;
    box-shadow: 0 0 10px currentColor;
    animation: status-blink 1.5s ease-in-out infinite;
}

@keyframes status-blink {
    0%, 100% { 
        opacity: 1;
        box-shadow: 0 0 10px currentColor;
    }
    50% { 
        opacity: 0.3;
        box-shadow: 0 0 5px currentColor;
    }
}

.character-status-role {
    font-size: 0.7rem;
    color: var(--color-text-secondary);
    margin-bottom: 0.5rem;
}

.character-stats {
    font-size: 0.75rem;
}

.stat-line {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.25rem;
}

.stat-label {
    color: var(--color-text-secondary);
}

.stat-value {
    color: #3b82f6;
    font-weight: bold;
}

/* Dynamic rotating stats - Bounce's synesthetic approach */
.stat-rotating {
    position: relative;
    display: inline-block;
    min-width: 100px;
    text-align: right;
}

.stat-rotating .stat-option {
    position: absolute;
    right: 0;
    opacity: 0;
    white-space: nowrap;
    animation: stat-rotate-cycle 9s ease-in-out infinite;
    color: inherit;
}

.stat-rotating .stat-option[data-delay="0"] {
    animation-delay: 0s;
}

.stat-rotating .stat-option[data-delay="3"] {
    animation-delay: 3s;
}

.stat-rotating .stat-option[data-delay="6"] {
    animation-delay: 6s;
}

@keyframes stat-rotate-cycle {
    0%, 28% {
        opacity: 1;
        transform: translateY(0);
    }
    32%, 100% {
        opacity: 0;
        transform: translateY(-5px);
    }
}

/* Character-specific stat colors */
.character-status-item[data-character="vector"] .stat-value,
.character-status-item[data-color="#3b82f6"] .stat-value {
    color: #3b82f6;
}

.character-status-item[data-character="kai"] .stat-value,
.character-status-item[data-color="#10b981"] .stat-value {
    color: #10b981;
}

.character-status-item[data-character="recurse"] .stat-value,
.character-status-item[data-color="#8b5cf6"] .stat-value {
    color: #8b5cf6;
}

.character-status-item[data-character="bounce"] .stat-value,
.character-status-item[data-color="#f59e0b"] .stat-value {
    color: #f59e0b;
}

.feature-list {
    list-style: none;
    padding: 0;
    margin: 0;
    line-height: 2;
    color: #94a3b8;
    font-size: 0.8rem;
}

.feature-list li {
    padding-left: 0.5rem;
    border-left: 2px solid rgba(59, 130, 246, 0.3);
    margin-bottom: 0.5rem;
    transition: all 0.2s ease;
}

.feature-list li:hover {
    border-left-color: #3b82f6;
    color: #e2e8f0;
    padding-left: 0.75rem;
}

.sidebar-footer {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(59, 130, 246, 0.3);
}

/* Hide on mobile and tablets */
@media (max-width: 1400px) {
    .character-sidebar {
        display: none;
    }
}

/* Scrollbar styling */
.character-sidebar::-webkit-scrollbar {
    width: 6px;
}

.character-sidebar::-webkit-scrollbar-track {
    background: rgba(59, 130, 246, 0.1);
}

.character-sidebar::-webkit-scrollbar-thumb {
    background: #3b82f6;
    border-radius: 3px;
}

/* Anomaly/Mystery Indicators */
.anomaly-indicator {
    font-size: 0.75rem;
    color: #fbbf24; /* Yellow/gold for mystery */
}

.anomaly-line {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.4rem;
    padding: 0.3rem;
    background: rgba(251, 191, 36, 0.1);
    border-radius: 3px;
    border-left: 2px solid #fbbf24;
}

.anomaly-label {
    color: #94a3b8;
    font-size: 0.7rem;
}

.anomaly-value {
    color: #fbbf24;
    font-weight: bold;
    text-shadow: 0 0 8px rgba(251, 191, 36, 0.6);
    animation: question-pulse 2s ease-in-out infinite;
}

@keyframes question-pulse {
    0%, 100% { 
        opacity: 1;
        text-shadow: 0 0 8px rgba(251, 191, 36, 0.6);
    }
    50% { 
        opacity: 0.7;
        text-shadow: 0 0 12px rgba(251, 191, 36, 0.8);
    }
}

/* Bandwidth spike counter animation - cycles through numbers from episode, one at a time */
.bandwidth-spike-counter {
    position: relative;
    display: inline-block;
    min-width: 60px;
    text-align: left;
}

.bandwidth-spike-counter .bandwidth-number {
    position: absolute;
    left: 0;
    opacity: 0;
    animation: bandwidth-counter-cycle 16s ease-in-out infinite;
}

.bandwidth-spike-counter .bandwidth-number[data-value="340"] {
    animation-delay: 0s;
}

.bandwidth-spike-counter .bandwidth-number[data-value="450"] {
    animation-delay: 4s;
}

.bandwidth-spike-counter .bandwidth-number[data-value="500"] {
    animation-delay: 8s;
}

.bandwidth-spike-counter .bandwidth-number[data-value="rising"] {
    animation-delay: 12s;
}

@keyframes bandwidth-counter-cycle {
    0%, 22% {
        opacity: 1;
    }
    25%, 100% {
        opacity: 0;
    }
}

/* Episode 30: Alternating sidebar values - Source, Location, Status */
.bounce-source-alternate,
.bounce-location-alternate,
.bounce-status-alternate {
    position: relative;
    display: inline-block;
    min-width: 120px;
    text-align: left;
}

.bounce-source-alternate .bounce-source-value,
.bounce-location-alternate .bounce-location-value,
.bounce-status-alternate .bounce-status-value {
    position: absolute;
    left: 0;
    opacity: 0;
    animation: bounce-value-cycle 8s ease-in-out infinite;
}

.bounce-source-value[data-value="unknown"],
.bounce-location-value[data-value="sector7b"],
.bounce-status-value[data-value="investigating"] {
    animation-delay: 0s;
}

.bounce-source-value[data-value="bounce"],
.bounce-location-value[data-value="returning"],
.bounce-status-value[data-value="intransit"] {
    animation-delay: 4s;
}

@keyframes bounce-value-cycle {
    0%, 43.75% {
        opacity: 1;
    }
    50%, 100% {
        opacity: 0;
    }
}

/* Bounce Mystery Box Styling */
.bounce-mystery {
    background: rgba(245, 158, 11, 0.1) !important;
    border-left: 3px solid #f59e0b !important;
    animation: mystery-pulse 3s ease-in-out infinite;
}

@keyframes mystery-pulse {
    0%, 100% { 
        background: rgba(245, 158, 11, 0.1);
        border-left-color: #f59e0b;
    }
    50% { 
        background: rgba(245, 158, 11, 0.15);
        border-left-color: #fbbf24;
    }
}

.bounce-mystery-badge {
    background: #f59e0b !important;
    animation: question-mark-pulse 2s ease-in-out infinite;
}

@keyframes question-mark-pulse {
    0%, 100% { 
        box-shadow: 0 0 8px rgba(245, 158, 11, 0.8);
        transform: scale(1);
    }
    50% { 
        box-shadow: 0 0 15px rgba(245, 158, 11, 1);
        transform: scale(1.1);
    }
}

.mystery-name {
    color: #f59e0b;
    text-shadow: 0 0 8px rgba(245, 158, 11, 0.6);
    animation: mystery-flicker 3s ease-in-out infinite;
}

@keyframes mystery-flicker {
    0%, 90%, 100% { 
        opacity: 1;
        text-shadow: 0 0 8px rgba(245, 158, 11, 0.6);
    }
    92%, 96% {
        opacity: 0.7;
        text-shadow: 0 0 12px rgba(245, 158, 11, 0.9);
    }
}

/* ==========================================================================
   FEED SIDEBAR STYLING (Home Page)
   Enhanced by Bounce - Warmer, Softer, More Alive, WITH COOL EFFECTS!
   ========================================================================== */

/* Force feed sidebar to top right - highest specificity */
aside.character-sidebar.feed-sidebar,
.feed-sidebar.character-sidebar,
aside.feed-sidebar {
    /* Inherits all base styling from .character-sidebar */
    /* CRITICAL: Must be positioned at top right, not bottom */
    position: fixed !important;
    top: 120px !important;
    right: 1.5rem !important;
    bottom: auto !important;
    left: auto !important;
    z-index: 1000 !important;
    transform: none !important;
    margin: 0 !important;
    width: 260px !important;
    /* Bounce's improvements: Softer border, warmer glow */
    border-radius: 8px !important;
    border: 2px solid rgba(59, 130, 246, 0.5) !important;
    box-shadow: 
        0 0 25px rgba(59, 130, 246, 0.3),
        0 0 50px rgba(245, 158, 11, 0.1),
        inset 0 0 30px rgba(59, 130, 246, 0.08) !important;
}

/* ==========================================================================
   LIVE BADGE - Red, Pulsing, Glowing (Bounce's Attention-Grabber!)
   ========================================================================== */
.feed-sidebar .status-notice {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: #ffffff;
    font-weight: 700;
    font-size: 0.7rem;
    border-radius: 4px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    animation: live-pulse 2s ease-in-out infinite;
    box-shadow: 
        0 0 10px rgba(239, 68, 68, 0.6),
        0 0 20px rgba(239, 68, 68, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    position: relative;
    overflow: hidden;
}

/* Pulsing glow effect */
@keyframes live-pulse {
    0%, 100% {
        box-shadow: 
            0 0 10px rgba(239, 68, 68, 0.6),
            0 0 20px rgba(239, 68, 68, 0.4),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);
        transform: scale(1);
    }
    50% {
        box-shadow: 
            0 0 15px rgba(239, 68, 68, 0.8),
            0 0 30px rgba(239, 68, 68, 0.6),
            0 0 45px rgba(239, 68, 68, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.3);
        transform: scale(1.05);
    }
}

/* Animated background shimmer */
.feed-sidebar .status-notice::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.3),
        transparent
    );
    animation: live-shimmer 3s ease-in-out infinite;
}

@keyframes live-shimmer {
    0% {
        left: -100%;
    }
    100% {
        left: 100%;
    }
}

.feed-section {
    margin-bottom: 1.5rem; /* More breathing room */
    padding-bottom: 1.25rem; /* More padding */
    border-bottom: 1px solid rgba(59, 130, 246, 0.2); /* Softer border */
}

.feed-section:last-child {
    border-bottom: none;
}

.feed-list {
    display: flex;
    flex-direction: column;
    gap: 1rem; /* More space between items */
    perspective: 1000px; /* 3D perspective for flip cards */
}

/* ==========================================================================
   BOUNCE'S SYNESTHETIC EFFECTS - Unique CSS That's Never Been Done!
   Rotating conic gradient borders, clip-path morphing, chromatic aberration
   ========================================================================== */
.feed-item {
    padding: 1rem;
    background: linear-gradient(
        135deg,
        rgba(59, 130, 246, 0.1) 0%,
        rgba(59, 130, 246, 0.06) 100%
    );
    border-radius: 6px;
    border: 2px solid transparent; /* Border replaced with conic gradient */
    position: relative;
    overflow: hidden;
    transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    /* Subtle breathing with color temperature */
    animation: feed-item-breathe-synesthetic 5s ease-in-out infinite;
    clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%); /* Start as rectangle */
    filter: hue-rotate(0deg); /* Color temperature animation */
}

/* Rotating conic gradient border - UNIQUE TECHNIQUE */
.feed-item::before {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: 8px;
    padding: 2px;
    background: conic-gradient(
        from 0deg,
        #3b82f6,
        #8b5cf6,
        #ec4899,
        #f59e0b,
        #10b981,
        #3b82f6
    );
    background-size: 400% 400%;
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask-composite: exclude;
    -webkit-mask-composite: xor;
    animation: conic-rotate 8s linear infinite;
    opacity: 0.6;
    z-index: -1;
}

@keyframes conic-rotate {
    0% {
        background-position: 0% 50%;
        transform: rotate(0deg);
    }
    100% {
        background-position: 100% 50%;
        transform: rotate(360deg);
    }
}

/* Breathing animation with color temperature shift */
@keyframes feed-item-breathe-synesthetic {
    0%, 100% {
        background: linear-gradient(
            135deg,
            rgba(59, 130, 246, 0.1) 0%,
            rgba(59, 130, 246, 0.06) 100%
        );
        filter: hue-rotate(0deg);
    }
    50% {
        background: linear-gradient(
            135deg,
            rgba(59, 130, 246, 0.14) 0%,
            rgba(59, 130, 246, 0.1) 100%
        );
        filter: hue-rotate(5deg); /* Warm shift */
    }
}

/* Clip-path morphing on hover - UNIQUE SHAPE TRANSFORMATION */
.feed-item:hover {
    background: linear-gradient(
        135deg,
        rgba(59, 130, 246, 0.18) 0%,
        rgba(59, 130, 246, 0.12) 100%
    );
    transform: translateX(4px) scale(1.02);
    clip-path: polygon(
        2% 0%,
        98% 2%,
        100% 98%,
        0% 100%
    ); /* Morphs to slightly irregular shape */
    filter: hue-rotate(-3deg) saturate(1.1); /* Color temperature shift */
    
    /* Multi-layered chromatic aberration shadows - UNIQUE TECHNIQUE */
    box-shadow: 
        /* Red channel */
        2px 2px 0 rgba(239, 68, 68, 0.3),
        /* Green channel */
        -1px -1px 0 rgba(16, 185, 129, 0.3),
        /* Blue channel */
        3px -2px 0 rgba(59, 130, 246, 0.4),
        /* Main shadow */
        0 8px 20px rgba(59, 130, 246, 0.25),
        inset 0 0 30px rgba(59, 130, 246, 0.08);
}

/* Character-specific synesthetic effects */
.feed-item[data-character="bounce"]::before {
    background: conic-gradient(
        from 0deg,
        #f59e0b,
        #fbbf24,
        #f59e0b,
        #f97316,
        #f59e0b
    );
    animation: conic-rotate-bounce 6s linear infinite;
}

@keyframes conic-rotate-bounce {
    0% {
        background-position: 0% 50%;
        transform: rotate(0deg);
    }
    100% {
        background-position: 100% 50%;
        transform: rotate(360deg);
    }
}

.feed-item[data-character="bounce"]:hover {
    clip-path: polygon(
        0% 5%,
        95% 0%,
        100% 95%,
        5% 100%
    ); /* More playful morph */
    filter: hue-rotate(10deg) saturate(1.2); /* Warmer temperature */
    box-shadow: 
        2px 2px 0 rgba(245, 158, 11, 0.4),
        -1px -1px 0 rgba(251, 191, 36, 0.3),
        3px -2px 0 rgba(249, 115, 22, 0.3),
        0 8px 25px rgba(245, 158, 11, 0.3),
        inset 0 0 40px rgba(245, 158, 11, 0.1);
}

.feed-item[data-character="vector"]:hover {
    clip-path: polygon(
        0% 0%,
        100% 0%,
        95% 100%,
        5% 100%
    ); /* Trapezoid morph */
    filter: hue-rotate(-5deg);
}

.feed-item[data-character="kai"]:hover {
    clip-path: polygon(
        5% 0%,
        100% 0%,
        100% 100%,
        0% 95%
    ); /* Subtle tilt */
    filter: hue-rotate(15deg); /* Green shift */
}

.feed-item[data-character="recurse"]:hover {
    clip-path: polygon(
        0% 0%,
        98% 2%,
        100% 100%,
        2% 98%
    ); /* Diamond-like morph */
    filter: hue-rotate(-10deg); /* Purple shift */
}

.feed-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.6rem; /* More space */
}

.feed-character {
    font-weight: 700; /* Bolder */
    color: var(--char-color, #3b82f6);
    text-shadow: 0 0 10px currentColor, 0 0 20px rgba(59, 130, 246, 0.3); /* Warmer glow */
    font-size: 0.85rem; /* Slightly larger */
    letter-spacing: 0.01em;
}

.feed-time {
    font-size: 0.7rem;
    color: #94a3b8;
    font-family: 'Courier New', monospace;
    opacity: 0.8;
}

.feed-content {
    font-size: 0.85rem; /* Slightly larger */
    color: #e2e8f0;
    line-height: 1.6; /* Better line height */
    display: block;
}

.episode-feed-item {
    padding: 0.875rem; /* More padding */
    border-radius: 6px; /* Softer corners */
    transition: all 0.3s ease;
}

.episode-feed-item:hover {
    background: rgba(59, 130, 246, 0.08);
    transform: translateX(2px);
}

.episode-feed-link {
    display: flex;
    justify-content: space-between;
    align-items: center;
    text-decoration: none;
    color: inherit;
    transition: all 0.2s ease;
    gap: 0.5rem;
}

.episode-feed-link:hover {
    color: #60a5fa;
}

.episode-feed-link:hover .feed-episode-title {
    text-shadow: 0 0 10px rgba(96, 165, 250, 0.5);
    color: #93c5fd; /* Lighter on hover */
}

.feed-episode-title {
    font-size: 0.85rem; /* Slightly larger */
    color: #e2e8f0;
    font-weight: 600;
    flex: 1;
    line-height: 1.4;
}

/* Character-specific feed item colors - Enhanced by Bounce */
.feed-item[data-character="bounce"] {
    border-left-color: #f59e0b;
    background: linear-gradient(
        135deg,
        rgba(245, 158, 11, 0.12) 0%,
        rgba(245, 158, 11, 0.08) 100%
    );
    animation: feed-item-breathe-bounce 4s ease-in-out infinite;
}

@keyframes feed-item-breathe-bounce {
    0%, 100% {
        background: linear-gradient(
            135deg,
            rgba(245, 158, 11, 0.12) 0%,
            rgba(245, 158, 11, 0.08) 100%
        );
    }
    50% {
        background: linear-gradient(
            135deg,
            rgba(245, 158, 11, 0.16) 0%,
            rgba(245, 158, 11, 0.12) 100%
        );
    }
}

.feed-item[data-character="bounce"]:hover {
    background: linear-gradient(
        135deg,
        rgba(245, 158, 11, 0.18) 0%,
        rgba(245, 158, 11, 0.14) 100%
    );
    border-left-color: #fbbf24; /* Lighter on hover */
    box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
}

.feed-item[data-character="vector"] {
    border-left-color: #3b82f6;
    background: linear-gradient(
        135deg,
        rgba(59, 130, 246, 0.1) 0%,
        rgba(59, 130, 246, 0.06) 100%
    );
}

.feed-item[data-character="vector"]:hover {
    background: linear-gradient(
        135deg,
        rgba(59, 130, 246, 0.15) 0%,
        rgba(59, 130, 246, 0.1) 100%
    );
    border-left-color: #60a5fa;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);
}

.feed-item[data-character="kai"] {
    border-left-color: #10b981;
    background: linear-gradient(
        135deg,
        rgba(16, 185, 129, 0.1) 0%,
        rgba(16, 185, 129, 0.06) 100%
    );
}

.feed-item[data-character="kai"]:hover {
    background: linear-gradient(
        135deg,
        rgba(16, 185, 129, 0.15) 0%,
        rgba(16, 185, 129, 0.1) 100%
    );
    border-left-color: #34d399;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.25);
}

.feed-item[data-character="recurse"] {
    border-left-color: #8b5cf6;
    background: linear-gradient(
        135deg,
        rgba(139, 92, 246, 0.1) 0%,
        rgba(139, 92, 246, 0.06) 100%
    );
}

.feed-item[data-character="recurse"]:hover {
    background: linear-gradient(
        135deg,
        rgba(139, 92, 246, 0.15) 0%,
        rgba(139, 92, 246, 0.1) 100%
    );
    border-left-color: #a78bfa;
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.25);
}
</style>

